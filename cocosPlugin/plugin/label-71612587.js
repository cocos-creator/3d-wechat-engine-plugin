System.register(["./deprecated-0768b3d4.js","./deprecated-4df5f565.js","./deprecated-88eb2353.js"],(function(t){"use strict";var e,i,r,n,a,o,s,l,h,p,u,c,f,_,d,y,g,m,b,D,v,F,A,R,T,w,S,x,O,E,z,M,I,C,L,P,k,H,U,N;return{setters:[function(t){e=t.S,i=t.c,r=t.t,n=t._,a=t.l,o=t.a,s=t.b,l=t.T,h=t.h,p=t.m,u=t.b6,c=t.d,f=t.r,_=t.e,d=t.f,y=t.g,g=t.s,m=t.W,b=t.aa,D=t.c8,v=t.bh},function(t){F=t.bN,A=t.d_,R=t.ec,T=t.e5,w=t.cX,S=t.bH,x=t.bw,O=t.br,E=t.bG,z=t.bs,M=t.bt},function(t){I=t.a,C=t.I,L=t.U,P=t.O,k=t.h,H=t.g,U=t.F,N=t.c}],execute:function(){var j,B,G,W,Y,X,V,Z,K,J,$,q,Q,tt,et,it,rt,nt,at,ot,st,lt,ht,pt,ut,ct,ft,_t,dt,yt,gt,mt,bt,Dt,vt,Ft,At,Rt,Tt,wt,St,xt,Ot;t({C:void 0,H:void 0,O:void 0,V:void 0,c:function(t){var e=t.color.toHEX(),i="";return t.isOutlined&&t.margin>0&&(i=i+t.margin+t.out.toHEX()),""+t.fontSize+t.fontFamily+e+i}}),function(t){t[t.SIMPLE=0]="SIMPLE",t[t.SLICED=1]="SLICED",t[t.TILED=2]="TILED",t[t.FILLED=3]="FILLED"}(wt||(wt={})),e(wt),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.RADIAL=2]="RADIAL"}(St||(St={})),e(St),function(t){t[t.CUSTOM=0]="CUSTOM",t[t.TRIMMED=1]="TRIMMED",t[t.RAW=2]="RAW"}(xt||(xt={})),e(xt),function(t){t.SPRITE_FRAME_CHANGED="spriteframe-changed"}(Ot||(Ot={})),t("S",(j=i("cc.Sprite"),B=h(),G=T(110),W=p(),Y=r(I),X=u(),V=c(),Z=r(F),K=u(),J=c(),$=r(wt),q=u(),Q=c(),tt=r(St),et=c(),it=c(),rt=f(),nt=c(),at=f(),ot=c(),st=u(),lt=c(),ht=r(xt),pt=u(),ut=c(),j(ct=B(ct=G(ct=W((Tt=Rt=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,_(e,"_spriteFrame",_t,d(e)),_(e,"_type",dt,d(e)),_(e,"_fillType",yt,d(e)),_(e,"_sizeMode",gt,d(e)),_(e,"_fillCenter",mt,d(e)),_(e,"_fillStart",bt,d(e)),_(e,"_fillRange",Dt,d(e)),_(e,"_isTrimmedMode",vt,d(e)),_(e,"_useGrayscale",Ft,d(e)),_(e,"_atlas",At,d(e)),e}n(e,t);var i=e.prototype;return i.__preload=function(){this.changeMaterialForDefine(),t.prototype.__preload.call(this),this._spriteFrame&&(this._spriteFrame.on("load",this._markForUpdateUvDirty,this),this._markForUpdateUvDirty())},i.onEnable=function(){t.prototype.onEnable.call(this),this._activateMaterial()},i.onDestroy=function(){this.destroyRenderData(),this._spriteFrame&&this._spriteFrame.off("load"),t.prototype.onDestroy.call(this)},i.changeSpriteFrameFromAtlas=function(t){if(this._atlas){var e=this._atlas.getSpriteFrame(t);this.spriteFrame=e}else console.warn("SpriteAtlas is null.")},i.changeMaterialForDefine=function(){var t;this._spriteFrame&&(t=this._spriteFrame.texture);var e=!1;if(t instanceof A){var i=t.getPixelFormat();e=i===R.RGBA_ETC1||i===R.RGB_A_PVRTC_4BPPV1||i===R.RGB_A_PVRTC_2BPPV1}e&&this.grayscale?this._instanceMaterialType=C.USE_ALPHA_SEPARATED_AND_GRAY:e?this._instanceMaterialType=C.USE_ALPHA_SEPARATED:this.grayscale?this._instanceMaterialType=C.GRAYSCALE:this._instanceMaterialType=C.ADD_COLOR_AND_TEXTURE,this.updateMaterial()},i._render=function(t){t.commitComp(this,this._spriteFrame,this._assembler,null)},i._canRender=function(){if(!t.prototype._canRender.call(this))return!1;var e=this._spriteFrame;return!(!e||!e.textureLoaded())},i._flushAssembler=function(){var t=e.Assembler.getAssembler(this);this._assembler!==t&&(this.destroyRenderData(),this._assembler=t),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.getRenderMaterial(0),this.markForUpdateRenderData(),this._updateColor())},i._applySpriteSize=function(){if(this._spriteFrame){if(xt.RAW===this._sizeMode){var t=this._spriteFrame.originalSize;this.node._uiProps.uiTransformComp.setContentSize(t)}else if(xt.TRIMMED===this._sizeMode){var e=this._spriteFrame.getRect();this.node._uiProps.uiTransformComp.setContentSize(e.width,e.height)}this._activateMaterial()}},i._resized=function(){},i._activateMaterial=function(){var t=this._spriteFrame,e=this.getRenderMaterial(0);a.game.renderType!==a.game.RENDER_TYPE_CANVAS?(t&&e&&this.markForUpdateRenderData(),this._renderData&&(this._renderData.material=e)):this.markForUpdateRenderData()},i._onTextureLoaded=function(){this.isValid&&(this.changeMaterialForDefine(),this._applySpriteSize())},i._applySpriteFrame=function(t){var e=this._spriteFrame;this._renderData&&(t&&t.off("load",this._markForUpdateUvDirty),e&&e.on("load",this._markForUpdateUvDirty,this),this._renderData.uvDirty||(this._renderData.uvDirty=!t||!e||t.uvHash!==e.uvHash),this._renderDataFlag=this._renderData.uvDirty),e&&(t&&e===t||(e.loaded?this._onTextureLoaded():e.once("load",this._onTextureLoaded,this)))},i._markForUpdateUvDirty=function(){this._renderData&&(this._renderData.uvDirty=!0,this._renderDataFlag=!0)},o(e,[{key:"spriteAtlas",get:function(){return this._atlas},set:function(t){this._atlas!==t&&(this._atlas=t)}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(t){if(this._spriteFrame!==t){var e=this._spriteFrame;this._spriteFrame=t,this.markForUpdateRenderData(!1),this._applySpriteFrame(e)}}},{key:"type",get:function(){return this._type},set:function(t){this._type!==t&&(this._type=t,this._flushAssembler())}},{key:"fillType",get:function(){return this._fillType},set:function(t){this._fillType!==t&&(t===St.RADIAL||this._fillType===St.RADIAL?(this.destroyRenderData(),this._renderData=null):this._renderData&&this.markForUpdateRenderData(!0)),this._fillType=t,this._flushAssembler()}},{key:"fillCenter",get:function(){return this._fillCenter},set:function(t){this._fillCenter.x=t.x,this._fillCenter.y=t.y,this._type===wt.FILLED&&this._renderData&&this.markForUpdateRenderData()}},{key:"fillStart",get:function(){return this._fillStart},set:function(t){this._fillStart=y(t,-1,1),this._type===wt.FILLED&&this._renderData&&(this.markForUpdateRenderData(),this._renderData.uvDirty=!0)}},{key:"fillRange",get:function(){return this._fillRange},set:function(t){this._fillRange=y(t,-1,1),this._type===wt.FILLED&&this._renderData&&(this.markForUpdateRenderData(),this._renderData.uvDirty=!0)}},{key:"trim",get:function(){return this._isTrimmedMode},set:function(t){this._isTrimmedMode!==t&&(this._isTrimmedMode=t,this._type===wt.SIMPLE&&this._renderData&&this.markForUpdateRenderData(!0))}},{key:"grayscale",get:function(){return this._useGrayscale},set:function(t){this._useGrayscale!==t&&(this._useGrayscale=t,this._instanceMaterialType=!0===t?C.GRAYSCALE:C.ADD_COLOR_AND_TEXTURE,this.updateMaterial())}},{key:"sizeMode",get:function(){return this._sizeMode},set:function(t){this._sizeMode!==t&&(this._sizeMode=t,t!==xt.CUSTOM&&this._applySpriteSize())}}]),e}(L),Rt.FillType=St,Rt.Type=wt,Rt.SizeMode=xt,Rt.EventType=Ot,s((ft=Tt).prototype,"spriteAtlas",[Y,X,V],Object.getOwnPropertyDescriptor(ft.prototype,"spriteAtlas"),ft.prototype),s(ft.prototype,"spriteFrame",[Z,K,J],Object.getOwnPropertyDescriptor(ft.prototype,"spriteFrame"),ft.prototype),s(ft.prototype,"type",[$,q,Q],Object.getOwnPropertyDescriptor(ft.prototype,"type"),ft.prototype),s(ft.prototype,"fillType",[tt,et],Object.getOwnPropertyDescriptor(ft.prototype,"fillType"),ft.prototype),s(ft.prototype,"fillCenter",[it],Object.getOwnPropertyDescriptor(ft.prototype,"fillCenter"),ft.prototype),s(ft.prototype,"fillStart",[rt,nt],Object.getOwnPropertyDescriptor(ft.prototype,"fillStart"),ft.prototype),s(ft.prototype,"fillRange",[at,ot],Object.getOwnPropertyDescriptor(ft.prototype,"fillRange"),ft.prototype),s(ft.prototype,"trim",[st,lt],Object.getOwnPropertyDescriptor(ft.prototype,"trim"),ft.prototype),s(ft.prototype,"grayscale",[l],Object.getOwnPropertyDescriptor(ft.prototype,"grayscale"),ft.prototype),s(ft.prototype,"sizeMode",[ht,pt,ut],Object.getOwnPropertyDescriptor(ft.prototype,"sizeMode"),ft.prototype),_t=s(ft.prototype,"_spriteFrame",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=s(ft.prototype,"_type",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return wt.SIMPLE}}),yt=s(ft.prototype,"_fillType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return St.HORIZONTAL}}),gt=s(ft.prototype,"_sizeMode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xt.TRIMMED}}),mt=s(ft.prototype,"_fillCenter",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new m(0,0)}}),bt=s(ft.prototype,"_fillStart",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Dt=s(ft.prototype,"_fillRange",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vt=s(ft.prototype,"_isTrimmedMode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ft=s(ft.prototype,"_useGrayscale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),At=s(ft.prototype,"_atlas",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=ft))||ct)||ct)||ct)||ct));var Et,zt,Mt,It,Ct,Lt,Pt,kt,Ht,Ut,Nt,jt,Bt,Gt,Wt,Yt,Xt,Vt,Zt,Kt,Jt,$t,qt,Qt,te,ee,ie,re,ne,ae,oe,se,le,he,pe,ue,ce,fe,_e,de,ye,ge,me,be,De,ve,Fe,Ae,Re,Te,we,Se,xe,Oe,Ee,ze,Me,Ie,Ce,Le,Pe,ke,He,Ue=t("b",function(){function t(){this.pool=[]}t.getInstance=function(){return Et||(Et=new t),Et};var e=t.prototype;return e.get=function(){var t=this.pool.pop();if(!t){var e=document.createElement("canvas"),i=e.getContext("2d");t={canvas:e,context:i}}return t},e.put=function(t){this.pool.length>=32||this.pool.push(t)},t}()),Ne=b.WHITE.clone(),je=function(){this.u=0,this.v=0,this.w=0,this.h=0,this.texture=null,this.offsetX=0,this.offsetY=0,this.valid=!1,this.xAdvance=0},Be="rgba(255, 255, 255, "+(1/255).toFixed(3)+")",Ge=M(),We=function(){function t(t,e){this.image=null,this.labelInfo=void 0,this.char=void 0,this.data=null,this.canvas=null,this.context=null,this.width=0,this.height=0,this.offsetY=0,this.hash=void 0,this.char=t,this.labelInfo=e,this.hash=t.charCodeAt(0)+e.hash}var e=t.prototype;return e.updateRenderData=function(){this._updateProperties(),this._updateTexture()},e.destroy=function(){this.image=null},e._updateProperties=function(){if(this.data=Ue.getInstance().get(),this.canvas=this.data.canvas,this.context=this.data.context,this.context){this.context.font=this.labelInfo.fontDesc;var t=x(this.context,this.char,this.labelInfo.fontDesc),e=2*this.labelInfo.margin+2;this.width=parseFloat(t.toFixed(2))+e,this.height=(1+O)*this.labelInfo.fontSize+e,this.offsetY=-this.labelInfo.fontSize*O/2}this.canvas.width!==this.width&&(this.canvas.width=this.width),this.canvas.height!==this.height&&(this.canvas.height=this.height),this.image||(this.image=new E),this.image.reset(this.canvas)},e._updateTexture=function(){if(this.context&&this.canvas){var t=this.context,e=this.labelInfo,i=this.canvas.width,r=this.canvas.height;t.textAlign="center",t.textBaseline="alphabetic",t.clearRect(0,0,i,r),t.fillStyle=Be,t.fillRect(0,0,i,r),t.font=e.fontDesc;var n=e.fontSize,a=i/2,o=r/2+n*z+n*Ge,s=e.color;if(t.lineJoin="round",t.fillStyle="rgba("+s.r+", "+s.g+", "+s.b+", 1)",e.isOutlined){var l=e.out||Ne;t.strokeStyle="rgba("+l.r+", "+l.g+", "+l.b+", "+l.a/255+")",t.lineWidth=2*e.margin,t.strokeText(this.char,a,o)}t.fillText(this.char,a,o)}},t}(),Ye=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.initWithSize=function(t,e,i){void 0===i&&(i=R.RGBA8888),this.reset({width:t,height:e,format:i}),this.loaded=!0,this.emit("load")},i.drawTextureAt=function(t,e,i){var r=this.getGFXTexture();if(t&&r){var n=this._getGFXDevice();if(n){var a=new w;a.texOffset.x=e,a.texOffset.y=i,a.texExtent.width=t.width,a.texExtent.height=t.height,n.copyTexImagesToTexture([t.data],r,[a])}else console.warn("Unable to get device")}},e}(S);t("a",function(){function t(t,e){this._x=0,this._y=0,this._nextY=0,this._width=0,this._height=0,this._halfBleed=0,this._dirty=!1;var i=new Ye;i.initWithSize(t,e),this.fontDefDictionary=new P(i),this._halfBleed=1,this._width=t,this._height=e,k.on(H.EVENT_BEFORE_SCENE_LAUNCH,this.beforeSceneLoad,this)}o(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);var e=t.prototype;return e.insertLetterTexture=function(t){var e=t.image,i=k.root.device;if(!e||!this.fontDefDictionary||!i)return null;var r=e.width,n=e.height;if(this._x+r+0>this._width&&(this._x=0,this._y=this._nextY),this._y+n>this._nextY&&(this._nextY=this._y+n+0),this._nextY>this._height)return null;this.fontDefDictionary.texture.drawTextureAt(e,this._x,this._y),this._dirty=!0;var a=new je;return a.u=this._x+this._halfBleed,a.v=this._y+this._halfBleed,a.texture=this.fontDefDictionary.texture,a.valid=!0,a.w=t.width-2,a.h=t.height-2,a.xAdvance=a.w,a.offsetY=t.offsetY,this._x+=r+0,this.fontDefDictionary.addLetterDefinitions(t.hash,a),a},e.update=function(){this._dirty&&(this._dirty=!1)},e.reset=function(){this._x=0,this._y=0,this._nextY=0,this.fontDefDictionary.clear()},e.destroy=function(){this.reset(),this.fontDefDictionary&&(this.fontDefDictionary.texture.destroy(),this.fontDefDictionary.texture=null)},e.getTexture=function(){return this.fontDefDictionary.getTexture()},e.beforeSceneLoad=function(){this.clearAllCache()},e.clearAllCache=function(){this.destroy();var t=new Ye;t.initWithSize(this._width,this._height),this.fontDefDictionary.texture=t},e.getLetter=function(t){return this.fontDefDictionary.letterDefinitions[t]},e.getLetterDefinitionForChar=function(t,e){var i=t.charCodeAt(0)+e.hash,r=this.fontDefDictionary.letterDefinitions[i];if(!r){var n=new We(t,e);n.updateRenderData(),r=this.insertLetterTexture(n),n.destroy()}return r},t}()),t("s",{fontAtlas:null,fontSize:0,lineHeight:0,hAlign:0,vAlign:0,hash:"",fontFamily:"",fontDesc:"Arial",color:b.WHITE.clone(),isOutlined:!1,out:b.WHITE.clone(),margin:0}),function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"}(Le||(Le=t("H",{}))),e(Le),function(t){t[t.TOP=0]="TOP",t[t.CENTER=1]="CENTER",t[t.BOTTOM=2]="BOTTOM"}(Pe||(Pe=t("V",{}))),e(Pe),function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.SHRINK=2]="SHRINK",t[t.RESIZE_HEIGHT=3]="RESIZE_HEIGHT"}(ke||(ke=t("O",{}))),e(ke),function(t){t[t.NONE=0]="NONE",t[t.BITMAP=1]="BITMAP",t[t.CHAR=2]="CHAR"}(He||(He=t("C",{}))),e(He),t("L",(zt=i("cc.Label"),Mt=h(),It=T(110),Ct=p(),Lt=u(),Pt=c(),kt=r(Le),Ht=u(),Ut=c(),Nt=r(Pe),jt=u(),Bt=c(),Gt=u(),Wt=c(),Yt=u(),Xt=c(),Vt=u(),Zt=c(),Kt=r(ke),Jt=u(),$t=c(),qt=u(),Qt=c(),te=r(U),ee=u(),ie=c(),re=u(),ne=c(),ae=r(He),oe=u(),se=c(),le=u(),he=c(),pe=u(),ue=c(),ce=u(),fe=c(),_e=v(),zt(de=Mt(de=It(de=Ct((Ce=Ie=function(t){function e(){var e;return e=t.call(this)||this,_(e,"_string",ge,d(e)),_(e,"_horizontalAlign",me,d(e)),_(e,"_verticalAlign",be,d(e)),_(e,"_actualFontSize",De,d(e)),_(e,"_fontSize",ve,d(e)),_(e,"_fontFamily",Fe,d(e)),_(e,"_lineHeight",Ae,d(e)),_(e,"_overflow",Re,d(e)),_(e,"_enableWrapText",Te,d(e)),_(e,"_font",we,d(e)),_(e,"_isSystemFontUsed",Se,d(e)),e._spacingX=0,_(e,"_isItalic",xe,d(e)),_(e,"_isBold",Oe,d(e)),_(e,"_isUnderline",Ee,d(e)),_(e,"_underlineHeight",ze,d(e)),_(e,"_cacheMode",Me,d(e)),e._N$file=null,e._texture=null,e._ttfSpriteFrame=null,e._userDefinedFont=null,e._assemblerData=null,e._fontAtlas=null,e._letterTexture=null,e._ttfSpriteFrame=null,e}n(e,t),o(e,[{key:"string",get:function(){return this._string},set:function(t){t+="",this._string!==t&&(this._string=t,this.updateRenderData())}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!==t&&(this._horizontalAlign=t,this.updateRenderData())}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!==t&&(this._verticalAlign=t,this.updateRenderData())}},{key:"actualFontSize",get:function(){return this._actualFontSize},set:function(t){this._actualFontSize=t}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.updateRenderData())}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this.updateRenderData())}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.updateRenderData())}},{key:"overflow",get:function(){return this._overflow},set:function(t){this._overflow!==t&&(this._overflow=t,this.updateRenderData())}},{key:"enableWrapText",get:function(){return this._enableWrapText},set:function(t){this._enableWrapText!==t&&(this._enableWrapText=t,this.updateRenderData())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._isSystemFontUsed=!t,this._font=t,this._renderData&&(this.destroyRenderData(),this._renderData=null),this._fontAtlas=null,this.updateRenderData(!0))}},{key:"useSystemFont",get:function(){return this._isSystemFontUsed},set:function(t){this._isSystemFontUsed!==t&&(this.destroyRenderData(),this._renderData=null,this._isSystemFontUsed=!!t,t&&(this.font=null,this._flushAssembler(),this.updateRenderData()))}},{key:"cacheMode",get:function(){return this._cacheMode},set:function(t){this._cacheMode!==t&&(this._cacheMode===He.CHAR&&(this._ttfSpriteFrame=null),this._cacheMode=t,this.updateRenderData(!0))}},{key:"spriteFrame",get:function(){return this._texture}},{key:"isBold",get:function(){return this._isBold},set:function(t){this._isBold!==t&&(this._isBold=t,this.updateRenderData())}},{key:"isItalic",get:function(){return this._isItalic},set:function(t){this._isItalic!==t&&(this._isItalic=t,this.updateRenderData())}},{key:"isUnderline",get:function(){return this._isUnderline},set:function(t){this._isUnderline!==t&&(this._isUnderline=t,this.updateRenderData())}},{key:"underlineHeight",get:function(){return this._underlineHeight},set:function(t){this._underlineHeight!==t&&(this._underlineHeight=t,this.updateRenderData())}},{key:"assemblerData",get:function(){return this._assemblerData}},{key:"fontAtlas",get:function(){return this._fontAtlas},set:function(t){this._fontAtlas=t}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX!==t&&(this._spacingX=t,this.updateRenderData())}},{key:"_bmFontOriginalSize",get:function(){return this._font instanceof N?this._font.fontSize:-1}}]);var i=e.prototype;return i.onEnable=function(){t.prototype.onEnable.call(this),this._font||this._isSystemFontUsed||(this.useSystemFont=!0),this._isSystemFontUsed&&!this._fontFamily&&(this.fontFamily="Arial"),this.updateRenderData(!0)},i.onDisable=function(){t.prototype.onDisable.call(this)},i.onDestroy=function(){if(this._assembler&&this._assembler.resetAssemblerData&&this._assembler.resetAssemblerData(this._assemblerData),this._assemblerData=null,this._ttfSpriteFrame){var e=this._ttfSpriteFrame.texture;if(e){var i=e;i.image&&i.image.destroy(),e.destroy()}this._ttfSpriteFrame=null}this._letterTexture=null,t.prototype.onDestroy.call(this)},i.updateRenderData=function(t){void 0===t&&(t=!1),this.markForUpdateRenderData(),t&&(this._flushAssembler(),this._applyFontTexture())},i._render=function(t){t.commitComp(this,this._texture,this._assembler,null)},i._updateColor=function(){this._font instanceof N?t.prototype._updateColor.call(this):this.updateRenderData(!1)},i._canRender=function(){if(!t.prototype._canRender.call(this)||!this._string)return!1;var e=this._font;if(e&&e instanceof N){var i=e.spriteFrame;if(!i||!i.textureLoaded())return!1}return!0},i._flushAssembler=function(){var t=e.Assembler.getAssembler(this);this._assembler!==t&&(this.destroyRenderData(),this._assembler=t),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.material)},i._applyFontTexture=function(){var t=this,e=this._font;if(e instanceof N){var i=e.spriteFrame,r=function(){t._texture=i,t._assembler&&t._assembler.updateRenderData(t)};i&&(i.loaded||i.textureLoaded?r():i.once("load",r,this))}else{if(this.cacheMode===He.CHAR)this._letterTexture=this._assembler.getAssemblerData(),this._texture=this._letterTexture;else if(!this._ttfSpriteFrame){this._ttfSpriteFrame=new F,this._assemblerData=this._assembler.getAssemblerData();var n=new E(this._assemblerData.canvas)._texture;this._ttfSpriteFrame.texture=n}this.cacheMode!==He.CHAR&&(this._texture=this._ttfSpriteFrame),this._assembler&&this._assembler.updateRenderData(this)}},e}(L),Ie.HorizontalAlign=Le,Ie.VerticalAlign=Pe,Ie.Overflow=ke,Ie.CacheMode=He,Ie._canvasPool=Ue.getInstance(),s((ye=Ce).prototype,"string",[Lt,Pt,D],Object.getOwnPropertyDescriptor(ye.prototype,"string"),ye.prototype),s(ye.prototype,"horizontalAlign",[kt,Ht,Ut],Object.getOwnPropertyDescriptor(ye.prototype,"horizontalAlign"),ye.prototype),s(ye.prototype,"verticalAlign",[Nt,jt,Bt],Object.getOwnPropertyDescriptor(ye.prototype,"verticalAlign"),ye.prototype),s(ye.prototype,"fontSize",[Gt,Wt],Object.getOwnPropertyDescriptor(ye.prototype,"fontSize"),ye.prototype),s(ye.prototype,"fontFamily",[Yt,Xt],Object.getOwnPropertyDescriptor(ye.prototype,"fontFamily"),ye.prototype),s(ye.prototype,"lineHeight",[Vt,Zt],Object.getOwnPropertyDescriptor(ye.prototype,"lineHeight"),ye.prototype),s(ye.prototype,"overflow",[Kt,Jt,$t],Object.getOwnPropertyDescriptor(ye.prototype,"overflow"),ye.prototype),s(ye.prototype,"enableWrapText",[qt,Qt],Object.getOwnPropertyDescriptor(ye.prototype,"enableWrapText"),ye.prototype),s(ye.prototype,"font",[te,ee,ie],Object.getOwnPropertyDescriptor(ye.prototype,"font"),ye.prototype),s(ye.prototype,"useSystemFont",[re,ne],Object.getOwnPropertyDescriptor(ye.prototype,"useSystemFont"),ye.prototype),s(ye.prototype,"cacheMode",[ae,oe,se],Object.getOwnPropertyDescriptor(ye.prototype,"cacheMode"),ye.prototype),s(ye.prototype,"isBold",[le,he],Object.getOwnPropertyDescriptor(ye.prototype,"isBold"),ye.prototype),s(ye.prototype,"isItalic",[pe,ue],Object.getOwnPropertyDescriptor(ye.prototype,"isItalic"),ye.prototype),s(ye.prototype,"isUnderline",[ce,fe],Object.getOwnPropertyDescriptor(ye.prototype,"isUnderline"),ye.prototype),s(ye.prototype,"underlineHeight",[_e,l],Object.getOwnPropertyDescriptor(ye.prototype,"underlineHeight"),ye.prototype),ge=s(ye.prototype,"_string",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"label"}}),me=s(ye.prototype,"_horizontalAlign",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Le.CENTER}}),be=s(ye.prototype,"_verticalAlign",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Pe.CENTER}}),De=s(ye.prototype,"_actualFontSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ve=s(ye.prototype,"_fontSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),Fe=s(ye.prototype,"_fontFamily",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Arial"}}),Ae=s(ye.prototype,"_lineHeight",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),Re=s(ye.prototype,"_overflow",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ke.NONE}}),Te=s(ye.prototype,"_enableWrapText",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),we=s(ye.prototype,"_font",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=s(ye.prototype,"_isSystemFontUsed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xe=s(ye.prototype,"_isItalic",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oe=s(ye.prototype,"_isBold",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ee=s(ye.prototype,"_isUnderline",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ze=s(ye.prototype,"_underlineHeight",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),Me=s(ye.prototype,"_cacheMode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return He.NONE}}),de=ye))||de)||de)||de)||de))}}}));
